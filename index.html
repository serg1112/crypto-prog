<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü—Ä–æ–≥–Ω–æ–∑ ¬∑ –ó–æ–Ω–∏ & –ü–∞—Å—Ç–∫–∏</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#111827">
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }
    header {
      padding: 14px;
      background: #020617;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
    }
    .card {
      background: #020617;
      margin: 10px;
      padding: 12px;
      border-radius: 10px;
    }
    .coin {
      font-weight: bold;
      font-size: 16px;
    }
    .status {
      color: #facc15;
      font-size: 14px;
    }
    .btn {
      margin-top: 8px;
      padding: 8px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      width: 100%;
      font-size: 14px;
    }
  </style>
</head>
<body>
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
  <script>
async function loadData() {
  const res = await fetch("data.json?_=" + Date.now());
  const data = await res.json();

  document.getElementById("btc").innerHTML = `
    <h3>${data.btc.pair}</h3>
    üü° ${data.btc.type}<br>
    –í—Ö—ñ–¥: ${data.btc.entry}<br>
    SL: ${data.btc.sl}<br>
    TP: ${data.btc.tp}
  `;

  document.getElementById("sol").innerHTML = `
    <h3>${data.sol.pair}</h3>
    üü° ${data.sol.type}<br>
    –í—Ö—ñ–¥: ${data.sol.entry}<br>
    SL: ${data.sol.sl}<br>
    TP: ${data.sol.tp}
  `;
}

// –ø–µ—Ä—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
loadData();

// –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 60 —Å–µ–∫
setInterval(loadData, 60000);
</script>
  <script>
const DATA_URL = "https://serg1112.github.io/crypto-prog/data.json";
const REFRESH_TIME = 60000; // 60 —Å–µ–∫—É–Ω–¥

async function loadData() {
  try {
    const response = await fetch(DATA_URL + "?t=" + Date.now());
    const data = await response.json();
    renderData(data);
    console.log("–û–Ω–æ–≤–ª–µ–Ω–æ:", new Date().toLocaleTimeString());
  } catch (e) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è JSON", e);
  }
}

function renderData(data) {
  // BTC
  document.getElementById("btc-bias").innerText = data.BTC.bias;
  document.getElementById("btc-zone").innerText = data.BTC.zone;
  document.getElementById("btc-sl").innerText = data.BTC.stop_loss;
  document.getElementById("btc-tp").innerText = data.BTC.take_profit.join(" / ");

  // SOL
  document.getElementById("sol-bias").innerText = data.SOL.bias;
  document.getElementById("sol-zone").innerText = data.SOL.zone;
  document.getElementById("sol-sl").innerText = data.SOL.stop_loss;
  document.getElementById("sol-tp").innerText = data.SOL.take_profit.join(" / ");

  // —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
  document.getElementById("last-update").innerText = data.last_update;
}

// —Å—Ç–∞—Ä—Ç
loadData();
setInterval(loadData, REFRESH_TIME);
</script>
</html>
